<!DOCTYPE html>
<html>

<head>
    <title>Ponte IOT - Insert</title>
</head>

<body>
    <h1>Processando Inserção... Aguarde o redirecionamento.</h1>
    <script>
        // URL base do script PHP no InfinityFree
        const INFINITYFREE_URL = 'https://akspluviometro.free.nf/registrar_medicao.php?';

        // Função para extrair parâmetros da URL (ex: 'volume=5')
        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        const volume = getParameterByName('volume');

        if (volume) {
            const url_destino = INFINITYFREE_URL + 'volume=' + volume;

            // A CHAVE: Redireciona o navegador do Wokwi/usuário para a URL final do InfinityFree.
            // Isso força a execução do filtro Anti-Bot de forma correta e limpa a requisição.
            window.location.replace(url_destino);

        } else {
            document.querySelector('h1').innerText = "ERRO: Parâmetro 'volume' ausente.";
        }
    </script>
</body>

</html>